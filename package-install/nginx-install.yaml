---
- name: Install Nginx(Version 1.24.0)
  hosts: all
  become: yes
 
  tasks:
  - name: Add Nginx repository key
    apt_key:
      url: https://nginx.org/keys/nginx_signing.key

  - name: Generate Nginx repository URL
    shell: echo "deb https://nginx.org/packages/ubuntu $(lsb_release -cs) nginx"
    register: nginx_repository
 
  - name: Add Nginx official repository
    apt_repository:
      repo: "{{ nginx_repository.stdout_lines[0] }}"
      state: present
 
  - name: Update package cache
    apt:
      update_cache: yes
 
  - name: Install Nginx
    apt:
      name: nginx
      state: present
 
  - name: Start Nginx service
    service:
      name: nginx
      state: started
      enabled: yes
 
 
 
##### ansible-playbook execute
# ansible-playbook -i inventory/hosts.ini package-install/nginx_install.yaml --limit localhost
 
